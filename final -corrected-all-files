variable "location" {
  type        = string
  description = "Azure region"
  default     = "westeurope"
}

variable "project_name" {
  type        = string
  description = "Project short name used in resource names"
  default     = "genaifunction"
}

variable "azure_openai_endpoint" {
  type        = string
  description = "Azure OpenAI endpoint (https://xxxx.openai.azure.com)"
}

variable "azure_openai_api_key" {
  type        = string
  description = "Azure OpenAI API key"
  sensitive   = true
}

variable "azure_openai_deployment" {
  type        = string
  description = "Azure OpenAI deployment name (model deployment)"
}

variable "azure_openai_api_version" {
  type        = string
  description = "Azure OpenAI API version"
  default     = "2025-03-01-preview"
}

variable "function_identity_object_id" {
  type        = string
  description = "Object ID of the existing Function App's managed identity"
}

# ‚≠ê ADD THESE TWO VARIABLES (very important)
variable "function_app_name" {
  type        = string
  description = "Name of the existing Azure Function App"
}

variable "function_app_hostname" {
  type        = string
  description = "Default hostname of the existing Function App (e.g. myfunc.azurewebsites.net)"
}

#################################################################################################################







location     = "westeurope"
project_name = "genaifunction"

azure_openai_endpoint    = "https://learning-openai.openai.azure.com/"
azure_openai_api_key     = "888888888888888888888888888888888888888"
azure_openai_deployment  = "gpt-4o-mini"
azure_openai_api_version = "2025-03-01-preview"

function_identity_object_id = "b5c8b279-4e5b-4dfd-9a5d-c7ad2d1a73aa"
function_app_name     = "rcaFunctionTestPOC"
function_app_hostname = "rcafunctiontestpoc.azurewebsites.net"

#####################################################################################################################

output "function_app_name" {
  description = "Existing Function App name"
  value       = var.function_app_name
}

output "function_url_base" {
  description = "Base URL of the existing Function App"
  value       = "https://${var.function_app_hostname}"
}

output "key_vault_name" {
  description = "Key Vault name"
  value       = azurerm_key_vault.kv.name
}

output "subscription_id" {
  description = "Current subscription ID"
  value       = data.azurerm_client_config.current.subscription_id
}

output "tenant_id" {
  description = "Current tenant ID"
  value       = data.azurerm_client_config.current.tenant_id
}

output "client_id" {
  description = "Current client/application ID"
  value       = data.azurerm_client_config.current.client_id
}

